(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3255],{40926:function(t,e,n){"use strict";function r(){return(null===n.g||void 0===n.g?void 0:n.g.crypto)||(null===n.g||void 0===n.g?void 0:n.g.msCrypto)||{}}function i(){let t=r();return t.subtle||t.webkitSubtle}Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowserCryptoAvailable=e.getSubtleCrypto=e.getBrowerCrypto=void 0,e.getBrowerCrypto=r,e.getSubtleCrypto=i,e.isBrowserCryptoAvailable=function(){return!!r()&&!!i()}},88618:function(t,e,n){"use strict";var r=n(34155);function i(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==r&&void 0!==r.versions&&void 0!==r.versions.node}Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=e.isNode=e.isReactNative=void 0,e.isReactNative=i,e.isNode=s,e.isBrowser=function(){return!i()&&!s()}},1468:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=n(70655);r.__exportStar(n(40926),e),r.__exportStar(n(88618),e)},62873:function(t,e){"use strict";function n(t){let e;return"undefined"!=typeof window&&void 0!==window[t]&&(e=window[t]),e}function r(t){let e=n(t);if(!e)throw Error(`${t} is not defined in Window`);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.getLocalStorage=e.getLocalStorageOrThrow=e.getCrypto=e.getCryptoOrThrow=e.getLocation=e.getLocationOrThrow=e.getNavigator=e.getNavigatorOrThrow=e.getDocument=e.getDocumentOrThrow=e.getFromWindowOrThrow=e.getFromWindow=void 0,e.getFromWindow=n,e.getFromWindowOrThrow=r,e.getDocumentOrThrow=function(){return r("document")},e.getDocument=function(){return n("document")},e.getNavigatorOrThrow=function(){return r("navigator")},e.getNavigator=function(){return n("navigator")},e.getLocationOrThrow=function(){return r("location")},e.getLocation=function(){return n("location")},e.getCryptoOrThrow=function(){return r("crypto")},e.getCrypto=function(){return n("crypto")},e.getLocalStorageOrThrow=function(){return r("localStorage")},e.getLocalStorage=function(){return n("localStorage")}},65755:function(t,e,n){"use strict";e.D=void 0;let r=n(62873);e.D=function(){let t,e,n;try{t=r.getDocumentOrThrow(),e=r.getLocationOrThrow()}catch(t){return null}function i(...e){let n=t.getElementsByTagName("meta");for(let t=0;t<n.length;t++){let r=n[t],i=["itemprop","property","name"].map(t=>r.getAttribute(t)).filter(t=>!!t&&e.includes(t));if(i.length&&i){let t=r.getAttribute("content");if(t)return t}}return""}let s=((n=i("name","og:site_name","og:title","twitter:title"))||(n=t.title),n),o=function(){let t=i("description","og:description","twitter:description","keywords");return t}(),a=e.origin,c=function(){let n=t.getElementsByTagName("link"),r=[];for(let t=0;t<n.length;t++){let i=n[t],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let t=i.getAttribute("href");if(t){if(-1===t.toLowerCase().indexOf("https:")&&-1===t.toLowerCase().indexOf("http:")&&0!==t.indexOf("//")){let n=e.protocol+"//"+e.host;if(0===t.indexOf("/"))n+=t;else{let r=e.pathname.split("/");r.pop();let i=r.join("/");n+=i+"/"+t}r.push(n)}else if(0===t.indexOf("//")){let n=e.protocol+t;r.push(n)}else r.push(t)}}}return r}();return{description:o,url:a,icons:c,name:s}}},35796:function(t,e,n){"use strict";n.d(e,{d:function(){return i}});var r=n(45624);class i extends r.J5{async authenticateUser(){var t;if(!this.provider||!(null!==(t=this.chainConfig)&&void 0!==t&&t.chainId))throw r.RM.notConnectedError();let{chainNamespace:e,chainId:n}=this.chainConfig;if(this.status!==r.MP.CONNECTED)throw r.RM.notConnectedError("Not connected with wallet, Please login/connect first");let i=await this.provider.request({method:"eth_accounts"});if(i&&i.length>0){let t=(0,r.Cb)(i[0],this.name);if(t){let e=(0,r.$E)(t);if(!e)return{idToken:t}}let s={domain:window.location.origin,uri:window.location.href,address:i[0],chainId:parseInt(n,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},o=await (0,r.tV)(s,e),a=await this.provider.request({method:"personal_sign",params:[o,i[0]]}),c=await (0,r.rn)(e,a,o,this.name,this.sessionTime);return(0,r.Fr)(i[0],this.name,c),{idToken:c}}throw r.RM.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==r.MP.CONNECTED)throw r.RM.disconnectionError("Not connected with wallet");let t=await this.provider.request({method:"eth_accounts"});t&&t.length>0&&(0,r.qz)(t[0],this.name)}}},43255:function(t,e,n){"use strict";n.d(e,{WalletConnectV1Adapter:function(){return tj}});var r={};n.r(r),n.d(r,{decrypt:function(){return tI},encrypt:function(){return tO},generateKey:function(){return tS},verifyHmac:function(){return tk}});var i=n(4942),s=n(65755),o=n(62873),a=n(34155),c=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},h=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},u=function(t){this.version=t,this.type="node",this.name="node",this.os=a.platform},l=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},d=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},p=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},f=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,g=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function y(t){var e=""!==t&&g.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var s=i.exec(t);return!!s&&[r,s]},!1);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new d;var i=r[1]&&r[1].split(/[._]/).slice(0,3);i?i.length<3&&(i=c(i,function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-i.length))):i=[];var s=i.join("."),o=function(t){for(var e=0,n=_.length;e<n;e++){var r=_[e],i=r[0];if(r[1].exec(t))return i}return null}(t),a=f.exec(t);return a&&a[1]?new l(n,s,o,a[1]):new h(n,s,o)}function w(t){return t?y(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new p:"undefined"!=typeof navigator?y(navigator.userAgent):void 0!==a&&a.version?new u(a.version.slice(1)):null}function v(){let t=w();return t&&t.os?t.os:void 0}o.getFromWindow,o.getFromWindowOrThrow,o.getDocumentOrThrow,o.getDocument,o.getNavigatorOrThrow;let m=o.getNavigator;o.getLocationOrThrow;let b=o.getLocation;o.getCryptoOrThrow,o.getCrypto,o.getLocalStorageOrThrow;let S=o.getLocalStorage,k=function(t){if("string"!=typeof t)throw Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch(e){return t}};function O(t){let e=null,n=S();return n&&(e=n.getItem(t)),e?k(e):e}function I(t){let e=S();e&&e.removeItem(t)}let E="WALLETCONNECT_DEEPLINK_CHOICE",C=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],R=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];var M=n(13550),T=n.n(M);n(4501);var N=n(65054),j=n.n(N),P=n(48764).Buffer;let x="utf8";function A(t){return new Uint8Array(t)}function q(t,e=!1){let n=t.toString("hex");return e?$(n):n}function W(t,e=!1){return q(j()(t),e)}function L(t){return A(P.from(F(t),"hex"))}function D(t){return P.from(t,x)}function U(...t){let e=[];return t.forEach(t=>e=e.concat(Array.from(t))),new Uint8Array([...e])}function F(t){return t.replace(/^0x/,"")}function $(t){return t.startsWith("0x")?t:`0x${t}`}function B(t){return(t=function(t,e=8,n="0"){return function(t,e,n="0"){return function(t,e,n,r="0"){let i=e-t.length,s=t;if(i>0){let e=r.repeat(i);s=n?e+t:t+e}return s}(t,e,!0,n)}(t,function(t,e=8){let n=t%e;return n?(t-n)/e*e+e:t}(t.length,e),n)}(t=F(t),2))&&(t=$(t)),t}function J(t){var e;return e=new Uint8Array(t),j()(e)}function V(t,e){let n=F(B(new(T())(t).toString(16)));return e?n:$(n)}var K=n(91094),Y=n(1468);let Z=function(t=3){let e=Date.now()*Math.pow(10,t);return e+Math.floor(Math.random()*Math.pow(10,t))};function Q(){let t=((t,e)=>{for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e})();return t}function G(t,e){return"string"==typeof t&&!!t.match(/^0x[0-9A-Fa-f]*$/)&&(!e||t.length===2+2*e)}function H(t){return void 0!==t.result}function X(t){return void 0!==t.error}function z(t){return void 0!==t.event}let tt=t=>!!t&&"0x"===t.toLowerCase().substring(0,2)&&!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!!(/^(0x)?[0-9a-f]{40}$/.test(t)||/^(0x)?[0-9A-F]{40}$/.test(t))||t===function(t){t=F(t.toLowerCase());let e=F((0,K.keccak_256)(D(t))),n="";for(let r=0;r<t.length;r++)parseInt(e[r],16)>7?n+=t[r].toUpperCase():n+=t[r];return $(n)}(t));function te(t){return t&&t.length&&!G(t[0])&&(t[0]=function(t,e=!1){return q(D(t),e)}(t[0],!0)),t}function tn(t){if(void 0!==t.type&&"0"!==t.type)return t;if(void 0===t.from||!tt(t.from))throw Error("Transaction object must include a valid 'from' value.");function e(t){let e=t;return"number"!=typeof t&&("string"!=typeof t||""===t||"string"==typeof t&&""===t.trim())||(G(t)?"string"==typeof t&&(e=B(t)):e=V(t)),"string"==typeof e&&(e=function(t){let e=t.startsWith("0x");return t=(t=F(t)).startsWith("0")?t.substring(1):t,e?$(t):t}($(e))),e}let n={from:B(t.from),to:void 0===t.to?void 0:B(t.to),gasPrice:void 0===t.gasPrice?"":e(t.gasPrice),gas:void 0===t.gas?void 0===t.gasLimit?"":e(t.gasLimit):e(t.gas),value:void 0===t.value?"":e(t.value),nonce:void 0===t.nonce?"":e(t.nonce),data:void 0===t.data?"":B(t.data)||"0x"},r=["gasPrice","gas","value","nonce"];return Object.keys(n).forEach(t=>{(void 0===n[t]||"string"==typeof n[t]&&!n[t].trim().length)&&r.includes(t)&&delete n[t]}),n}var tr=n(17563),ti=class{constructor(){this._eventEmitters=[],"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(t,e){this._eventEmitters.push({event:t,callback:e})}trigger(t){let e=[];t&&(e=this._eventEmitters.filter(e=>e.event===t)),e.forEach(t=>{t.callback()})}};let ts=void 0!==n.g.WebSocket?n.g.WebSocket:n(57026);var to=class{constructor(t){if(this.opts=t,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=t.protocol,this._version=t.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=t.subscriptions||[],this._netMonitor=t.netMonitor||new ti,!t.url||"string"!=typeof t.url)throw Error("Missing or invalid WebSocket url");this._url=t.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(t){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(t){}get connecting(){return 0===this.readyState}set connected(t){}get connected(){return 1===this.readyState}set closing(t){}get closing(){return 2===this.readyState}set closed(t){}get closed(){return 3===this.readyState}open(){this._socketCreate()}close(){this._socketClose()}send(t,e,n){if(!e||"string"!=typeof e)throw Error("Missing or invalid topic field");this._socketSend({topic:e,type:"pub",payload:t,silent:!!n})}subscribe(t){this._socketSend({topic:t,type:"sub",payload:"",silent:!0})}on(t,e){this._events.push({event:t,callback:e})}_socketCreate(){if(this._nextSocket)return;let t=function(t,e,n){var r,i,s,o,a;let c;let h=t.startsWith("https")?t.replace("https","wss"):t.startsWith("http")?t.replace("http","ws"):t,u=h.split("?"),l=!function(){let t=!function(){let t=w(),e=!!t&&!!t.name&&"node"===t.name.toLowerCase();return e}()&&!!m();return t}()?{protocol:e,version:n,env:(null===(i=w())||void 0===i?void 0:i.name)||""}:{protocol:e,version:n,env:"browser",host:(null===(r=b())||void 0===r?void 0:r.host)||""},d=(o=function(t){let e=-1!==t.indexOf("?")?t.indexOf("?"):void 0,n=void 0!==e?t.substr(e):"";return n}(u[1]||""),a=Object.assign(Object.assign({},tr.parse(o)),l),tr.stringify(a));return u[0]+"?"+d}(this._url,this._protocol,this._version);if(this._nextSocket=new ts(t),!this._nextSocket)throw Error("Failed to create socket");this._nextSocket.onmessage=t=>this._socketReceive(t),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=t=>this._socketError(t),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(t){let e=JSON.stringify(t);this._socket&&1===this._socket.readyState?this._socket.send(e):(this._setToQueue(t),this._socketCreate())}async _socketReceive(t){let e;try{e=JSON.parse(t.data)}catch(t){return}if(this._socketSend({topic:e.topic,type:"ack",payload:"",silent:!0}),this._socket&&1===this._socket.readyState){let t=this._events.filter(t=>"message"===t.event);t&&t.length&&t.forEach(t=>t.callback(e))}}_socketError(t){let e=this._events.filter(t=>"error"===t.event);e&&e.length&&e.forEach(e=>e.callback(t))}_queueSubscriptions(){let t=this._subscriptions;t.forEach(t=>this._queue.push({topic:t,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(t){this._queue.push(t)}_pushQueue(){let t=this._queue;t.forEach(t=>this._socketSend(t)),this._queue=[]}};let ta="Session currently connected",tc="Session currently disconnected",th="JSON RPC response format is invalid",tu="User close QRCode Modal";var tl=class{constructor(){this._eventEmitters=[]}subscribe(t){this._eventEmitters.push(t)}unsubscribe(t){this._eventEmitters=this._eventEmitters.filter(e=>e.event!==t)}trigger(t){let e,n=[];(e=void 0!==t.method?t.method:H(t)||X(t)?`response:${t.id}`:z(t)?t.event:"")&&(n=this._eventEmitters.filter(t=>t.event===e)),n&&n.length||C.includes(e)||e.startsWith("wc_")||z(e)||(n=this._eventEmitters.filter(t=>"call_request"===t.event)),n.forEach(e=>{if(X(t)){let n=Error(t.error.message);e.callback(n,null)}else e.callback(null,t)})}},td=class{constructor(t="walletconnect"){this.storageId=t}getSession(){let t=null,e=O(this.storageId);return e&&void 0!==e.bridge&&(t=e),t}setSession(t){return!function(t,e){let n="string"==typeof e?e:JSON.stringify(e),r=S();r&&r.setItem(t,n)}(this.storageId,t),t}removeSession(){I(this.storageId)}};let tp="abcdefghijklmnopqrstuvwxyz0123456789".split("").map(t=>`https://${t}.bridge.walletconnect.org`);var tf=class{constructor(t){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new tl,this._clientMeta=s.D()||t.connectorOpts.clientMeta||null,this._cryptoLib=t.cryptoLib,this._sessionStorage=t.sessionStorage||new td(t.connectorOpts.storageId),this._qrcodeModal=t.connectorOpts.qrcodeModal,this._qrcodeModalOptions=t.connectorOpts.qrcodeModalOptions,this._signingMethods=[...R,...t.connectorOpts.signingMethods||[]],!t.connectorOpts.bridge&&!t.connectorOpts.uri&&!t.connectorOpts.session)throw Error("Missing one of the required parameters: bridge / uri / session");if(t.connectorOpts.bridge){var e,n;let r;this.bridge="walletconnect.org"!==(0,(0,((n=e=t.connectorOpts.bridge).indexOf("//")>-1?n.split("/")[2]:n.split("/")[0]).split(":")[0]).split("?")[0]).split(".").slice(-2).join(".")?e:tp[Math.floor(Math.random()*tp.length)]}t.connectorOpts.uri&&(this.uri=t.connectorOpts.uri);let r=t.connectorOpts.session||this._getStorageSession();r&&(this.session=r),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=t.transport||new to({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),t.connectorOpts.uri&&this._subscribeToSessionRequest(),t.pushServerOpts&&this._registerPushServer(t.pushServerOpts)}set bridge(t){t&&(this._bridge=t)}get bridge(){return this._bridge}set key(t){if(!t)return;let e=L(t).buffer;this._key=e}get key(){if(this._key){var t;let e=(t=this._key,W(new Uint8Array(t),!1));return e}return""}set clientId(t){t&&(this._clientId=t)}get clientId(){let t=this._clientId;return t||(t=this._clientId=Q()),this._clientId}set peerId(t){t&&(this._peerId=t)}get peerId(){return this._peerId}set clientMeta(t){}get clientMeta(){let t=this._clientMeta;return t||(t=this._clientMeta=s.D()),t}set peerMeta(t){this._peerMeta=t}get peerMeta(){let t=this._peerMeta;return t}set handshakeTopic(t){t&&(this._handshakeTopic=t)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(t){t&&(this._handshakeId=t)}get handshakeId(){return this._handshakeId}get uri(){let t=this._formatUri();return t}set uri(t){if(!t)return;let{handshakeTopic:e,bridge:n,key:r}=this._parseUri(t);this.handshakeTopic=e,this.bridge=n,this.key=r}set chainId(t){this._chainId=t}get chainId(){let t=this._chainId;return t}set networkId(t){this._networkId=t}get networkId(){let t=this._networkId;return t}set accounts(t){this._accounts=t}get accounts(){let t=this._accounts;return t}set rpcUrl(t){this._rpcUrl=t}get rpcUrl(){let t=this._rpcUrl;return t}set connected(t){}get connected(){return this._connected}set pending(t){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(t){t&&(this._connected=t.connected,this.accounts=t.accounts,this.chainId=t.chainId,this.bridge=t.bridge,this.key=t.key,this.clientId=t.clientId,this.clientMeta=t.clientMeta,this.peerId=t.peerId,this.peerMeta=t.peerMeta,this.handshakeId=t.handshakeId,this.handshakeTopic=t.handshakeTopic)}on(t,e){this._eventManager.subscribe({event:t,callback:e})}off(t){this._eventManager.unsubscribe(t)}async createInstantRequest(t){this._key=await this._generateKey();let e=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(t)}]});this.handshakeId=e.id,this.handshakeTopic=Q(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw Error(tu)});let n=()=>{this.killSession()};try{let t=await this._sendCallRequest(e);return t&&n(),t}catch(t){throw n(),t}}async connect(t){if(!this._qrcodeModal)throw Error("QRCode Modal not provided");return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(t),new Promise(async(t,e)=>{this.on("modal_closed",()=>e(Error(tu))),this.on("connect",(n,r)=>{if(n)return e(n);t(r.params[0])})}))}async createSession(t){if(this._connected)throw Error(ta);if(this.pending)return;this._key=await this._generateKey();let e=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:t&&t.chainId?t.chainId:null}]});this.handshakeId=e.id,this.handshakeTopic=Q(),this._sendSessionRequest(e,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(t){if(this._connected)throw Error(ta);this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";let e={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},n={id:this.handshakeId,jsonrpc:"2.0",result:e};this._sendResponse(n),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(t){if(this._connected)throw Error(ta);let e=t&&t.message?t.message:"Session Rejected",n=this._formatResponse({id:this.handshakeId,error:{message:e}});this._sendResponse(n),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:e}]}),this._removeStorageSession()}updateSession(t){if(!this._connected)throw Error(tc);this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";let e={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},n=this._formatRequest({method:"wc_sessionUpdate",params:[e]});this._sendSessionRequest(n,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(t){let e=t?t.message:"Session Disconnected",n=this._formatRequest({method:"wc_sessionUpdate",params:[{approved:!1,chainId:null,networkId:null,accounts:null}]});await this._sendRequest(n),this._handleSessionDisconnect(e)}async sendTransaction(t){if(!this._connected)throw Error(tc);let e=tn(t),n=this._formatRequest({method:"eth_sendTransaction",params:[e]}),r=await this._sendCallRequest(n);return r}async signTransaction(t){if(!this._connected)throw Error(tc);let e=tn(t),n=this._formatRequest({method:"eth_signTransaction",params:[e]}),r=await this._sendCallRequest(n);return r}async signMessage(t){if(!this._connected)throw Error(tc);let e=this._formatRequest({method:"eth_sign",params:t}),n=await this._sendCallRequest(e);return n}async signPersonalMessage(t){if(!this._connected)throw Error(tc);t=te(t);let e=this._formatRequest({method:"personal_sign",params:t}),n=await this._sendCallRequest(e);return n}async signTypedData(t){if(!this._connected)throw Error(tc);let e=this._formatRequest({method:"eth_signTypedData",params:t}),n=await this._sendCallRequest(e);return n}async updateChain(t){if(!this._connected)throw Error("Session currently disconnected");let e=this._formatRequest({method:"wallet_updateChain",params:[t]}),n=await this._sendCallRequest(e);return n}unsafeSend(t,e){return this._sendRequest(t,e),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:e}]}),new Promise((e,n)=>{this._subscribeToResponse(t.id,(t,r)=>{if(t){n(t);return}if(!r)throw Error("Missing JSON RPC response");e(r)})})}async sendCustomRequest(t,e){if(!this._connected)throw Error(tc);switch(t.method){case"eth_accounts":return this.accounts;case"eth_chainId":return V(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":t.params&&(t.params[0]=tn(t.params[0]));break;case"personal_sign":t.params&&(t.params=te(t.params))}let n=this._formatRequest(t),r=await this._sendCallRequest(n,e);return r}approveRequest(t){if(H(t)){let e=this._formatResponse(t);this._sendResponse(e)}else throw Error('JSON-RPC success response must include "result" field')}rejectRequest(t){if(X(t)){let e=this._formatResponse(t);this._sendResponse(e)}else throw Error('JSON-RPC error response must include "error" field')}transportClose(){this._transport.close()}async _sendRequest(t,e){let n=this._formatRequest(t),r=await this._encrypt(n),i=void 0!==(null==e?void 0:e.topic)?e.topic:this.peerId,s=JSON.stringify(r),o=void 0!==(null==e?void 0:e.forcePushNotification)?!e.forcePushNotification:!!n.method.startsWith("wc_")||!R.includes(n.method);this._transport.send(s,i,o)}async _sendResponse(t){let e=await this._encrypt(t),n=this.peerId,r=JSON.stringify(e);this._transport.send(r,n,!0)}async _sendSessionRequest(t,e,n){this._sendRequest(t,n),this._subscribeToSessionResponse(t.id,e)}_sendCallRequest(t,e){return this._sendRequest(t,e),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:e}]}),this._subscribeToCallResponse(t.id)}_formatRequest(t){if(void 0===t.method)throw Error('JSON RPC request must have valid "method" value');let e={id:void 0===t.id?Z():t.id,jsonrpc:"2.0",method:t.method,params:void 0===t.params?[]:t.params};return e}_formatResponse(t){if(void 0===t.id)throw Error('JSON RPC request must have valid "id" value');let e={id:t.id,jsonrpc:"2.0"};if(X(t)){let n=function(t){let e=t.message||"Failed or Rejected Request",n=-32e3;if(t&&!t.code)switch(e){case"Parse error":n=-32700;break;case"Invalid request":n=-32600;break;case"Method not found":n=-32601;break;case"Invalid params":n=-32602;break;case"Internal error":n=-32603;break;default:n=-32e3}let r={code:n,message:e};return t.data&&(r.data=t.data),r}(t.error),r=Object.assign(Object.assign(Object.assign({},e),t),{error:n});return r}if(H(t)){let n=Object.assign(Object.assign({},e),t);return n}throw Error(th)}_handleSessionDisconnect(t){this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),I(E)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:t||"Session Disconnected"}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(t,e){e&&e.approved?(this._connected?(e.chainId&&(this.chainId=e.chainId),e.accounts&&(this.accounts=e.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,e.chainId&&(this.chainId=e.chainId),e.accounts&&(this.accounts=e.accounts),e.peerId&&!this.peerId&&(this.peerId=e.peerId),e.peerMeta&&!this.peerMeta&&(this.peerMeta=e.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(t)}async _handleIncomingMessages(t){let e;let n=[this.clientId,this.handshakeTopic];if(!n.includes(t.topic))return;try{e=JSON.parse(t.payload)}catch(t){return}let r=await this._decrypt(e);r&&this._eventManager.trigger(r)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(t,e){this.on(`response:${t}`,e)}_subscribeToSessionResponse(t,e){this._subscribeToResponse(t,(t,n)=>{if(t){this._handleSessionResponse(t.message);return}H(n)?this._handleSessionResponse(e,n.result):n.error&&n.error.message?this._handleSessionResponse(n.error.message):this._handleSessionResponse(e)})}_subscribeToCallResponse(t){return new Promise((e,n)=>{this._subscribeToResponse(t,(t,r)=>{if(t){n(t);return}H(r)?e(r.result):r.error&&r.error.message?n(r.error):n(Error(th))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(t,e)=>{let{request:n}=e.params[0];if(function(){let t=v();return!!t&&(function(){let t=v();return!!t&&t.toLowerCase().includes("android")}()||function(){let t=v();return!!t&&(t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1)}())}()&&this._signingMethods.includes(n.method)){let t=O(E);t&&(window.location.href=t.href)}}),this.on("wc_sessionRequest",(t,e)=>{t&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:t.toString()}]}),this.handshakeId=e.id,this.peerId=e.params[0].peerId,this.peerMeta=e.params[0].peerMeta;let n=Object.assign(Object.assign({},e),{method:"session_request"});this._eventManager.trigger(n)}),this.on("wc_sessionUpdate",(t,e)=>{t&&this._handleSessionResponse(t.message),this._handleSessionResponse("Session disconnected",e.params[0])})}_initTransport(){this._transport.on("message",t=>this._handleIncomingMessages(t)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){let t=this.protocol,e=this.handshakeTopic,n=this.version,r=encodeURIComponent(this.bridge),i=this.key,s=`${t}:${e}@${n}?bridge=${r}&key=${i}`;return s}_parseUri(t){let e=function(t){let e=t.indexOf(":"),n=-1!==t.indexOf("?")?t.indexOf("?"):void 0,r=t.substring(0,e),i=t.substring(e+1,n),s=function(t){let e=t.split("@"),n={handshakeTopic:e[0],version:parseInt(e[1],10)};return n}(i),o=void 0!==n?t.substr(n):"",a=function(t){let e=tr.parse(t),n={key:e.key||"",bridge:e.bridge||""};return n}(o),c=Object.assign(Object.assign({protocol:r},s),a);return c}(t);if(e.protocol===this.protocol){if(!e.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");let t=e.handshakeTopic;if(!e.bridge)throw Error("Invalid or missing bridge url parameter value");let n=decodeURIComponent(e.bridge);if(!e.key)throw Error("Invalid or missing key parameter value");let r=e.key;return{handshakeTopic:t,bridge:n,key:r}}throw Error("URI format is invalid")}async _generateKey(){if(this._cryptoLib){let t=await this._cryptoLib.generateKey();return t}return null}async _encrypt(t){let e=this._key;if(this._cryptoLib&&e){let n=await this._cryptoLib.encrypt(t,e);return n}return null}async _decrypt(t){let e=this._key;if(this._cryptoLib&&e){let n=await this._cryptoLib.decrypt(t,e);return n}return null}_getStorageSession(){let t=null;return this._sessionStorage&&(t=this._sessionStorage.getSession()),t}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(t){if(!t.url||"string"!=typeof t.url)throw Error("Invalid or missing pushServerOpts.url parameter value");if(!t.type||"string"!=typeof t.type)throw Error("Invalid or missing pushServerOpts.type parameter value");if(!t.token||"string"!=typeof t.token)throw Error("Invalid or missing pushServerOpts.token parameter value");let e={bridge:this.bridge,topic:this.clientId,type:t.type,token:t.token,peerName:"",language:t.language||""};this.on("connect",async(n,r)=>{if(n)throw n;if(t.peerMeta){let t=r.params[0].peerMeta.name;e.peerName=t}try{let n=await fetch(`${t.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!r.success)throw Error("Failed to register in Push Server")}catch(t){throw Error("Failed to register in Push Server")}})}};let tg="AES-CBC",t_="HMAC";async function ty(t,e=tg){return Y.getSubtleCrypto().importKey("raw",t,e===tg?{length:256,name:tg}:{hash:{name:"SHA-256"},name:t_},!0,e===tg?["encrypt","decrypt"]:["sign","verify"])}async function tw(t,e,n){let r=Y.getSubtleCrypto(),i=await ty(e,tg),s=await r.encrypt({iv:t,name:tg},i,n);return new Uint8Array(s)}async function tv(t,e,n){let r=Y.getSubtleCrypto(),i=await ty(e,tg),s=await r.decrypt({iv:t,name:tg},i,n);return new Uint8Array(s)}async function tm(t,e){let n=Y.getSubtleCrypto(),r=await ty(t,t_),i=await n.sign({length:256,name:t_},r,e);return new Uint8Array(i)}async function tb(t,e){let n=await tm(t,e);return n}async function tS(t){let e=function(t){let e=Y.getBrowerCrypto();return e.getRandomValues(new Uint8Array(t))}((t||256)/8),n=A(j()(e)).buffer;return n}async function tk(t,e){let n=L(t.data),r=L(t.iv),i=L(t.hmac),s=W(i,!1),o=U(n,r),a=await tb(e,o),c=W(a,!1);return F(s)===F(c)}async function tO(t,e,n){let r=A(J(e)),i=n||await tS(128),s=A(J(i)),o=W(s,!1),a=JSON.stringify(t),c=A(D(a)),h=await tw(s,r,c),u=W(h,!1),l=U(h,s),d=await tb(r,l),p=W(d,!1);return{data:u,hmac:p,iv:o}}async function tI(t,e){var n;let r;let i=A(J(e));if(!i)throw Error("Missing key: required for decryption");let s=await tk(t,i);if(!s)return null;let o=L(t.data),a=L(t.iv),c=await tv(a,i,o),h=(n=c,j()(n).toString(x));try{r=JSON.parse(h)}catch(t){return null}return r}var tE=class extends tf{constructor(t,e){super({cryptoLib:r,connectorOpts:t,pushServerOpts:e})}},tC=n(45624),tR=n(35796),tM=n(52062);let tT=[{name:"Rainbow",chains:[tC.EN.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[tC.EN.EIP155],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function tN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}class tj extends tR.d{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,i.Z)(this,"name",tC.rW.WALLET_CONNECT_V1),(0,i.Z)(this,"adapterNamespace",tC.yk.EIP155),(0,i.Z)(this,"currentChainNamespace",tC.EN.EIP155),(0,i.Z)(this,"type",tC.hN.EXTERNAL),(0,i.Z)(this,"adapterOptions",void 0),(0,i.Z)(this,"status",tC.MP.NOT_READY),(0,i.Z)(this,"adapterData",{uri:"",extensionAdapters:tT}),(0,i.Z)(this,"connector",null),(0,i.Z)(this,"wcProvider",null),(0,i.Z)(this,"rehydrated",!1),this.adapterOptions=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tN(Object(n),!0).forEach(function(e){(0,i.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t),this.chainConfig=t.chainConfig||null,this.sessionTime=t.sessionTime||86400}get connected(){var t;return!!(null!==(t=this.connector)&&void 0!==t&&t.connected)}get provider(){var t;return(null===(t=this.wcProvider)||void 0===t?void 0:t.provider)||null}set provider(t){throw Error("Not implemented")}async init(){super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=(0,tC.h2)(tC.EN.EIP155,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new tM.AX({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(tC.n2.READY,tC.rW.WALLET_CONNECT_V1),this.status=tC.MP.READY,tC.cM.debug("initializing wallet connect v1 adapter"),this.connector.connected&&(this.rehydrated=!0,await this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId}))}async connect(){if(super.checkConnectionRequirements(),!this.connector)throw tC.Ty.notReady("Wallet adapter is not ready yet");if(this.connected)return await this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId}),this.provider;if(this.status!==tC.MP.CONNECTING){var t,e;null!==(t=this.adapterOptions.adapterSettings)&&void 0!==t&&t.qrcodeModal&&(this.connector=this.getWalletConnectInstance(),this.wcProvider=new tM.AX({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(e=this.adapterOptions.adapterSettings)||void 0===e?void 0:e.skipNetworkSwitching},connector:this.connector})),await this.createNewSession(),this.status=tC.MP.CONNECTING,this.emit(tC.n2.CONNECTING,{adapter:tC.rW.WALLET_CONNECT_V1})}return new Promise((t,e)=>{if(!this.connector)return e(tC.Ty.notReady("Wallet adapter is not ready yet"));this.connector.on("modal_closed",async()=>(this.status=tC.MP.READY,this.emit(tC.n2.READY,tC.rW.WALLET_CONNECT_V1),e(Error("User closed modal"))));try{this.connector.on("connect",async(e,n)=>(e&&this.emit(tC.n2.ERRORED,e),tC.cM.debug("connected event emitted by web3auth"),await this.onConnectHandler(n.params[0]),t(this.provider)))}catch(t){tC.cM.error("Wallet connect v1 adapter error while connecting",t),this.status=tC.MP.READY,this.rehydrated=!0,this.emit(tC.n2.ERRORED,t),e(t instanceof tC.up?t:tC.RM.connectionError("Failed to login with wallet connect: ".concat((null==t?void 0:t.message)||"")))}})}setAdapterSettings(t){this.status!==tC.MP.READY&&null!=t&&t.sessionTime&&(this.sessionTime=t.sessionTime)}async getUserInfo(){if(!this.connected)throw tC.RM.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async disconnect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1},{cleanup:e}=t;if(!this.connector||!this.connected)throw tC.RM.notConnectedError("Not connected with wallet");await super.disconnect(),await this.connector.killSession(),this.rehydrated=!1,e?(this.connector=null,this.status=tC.MP.NOT_READY,this.wcProvider=null):this.status=tC.MP.READY,this.emit(tC.n2.DISCONNECTED)}async addChain(t){try{var e;if(!this.wcProvider)throw tC.Ty.notReady("Wallet adapter is not ready yet");let n=null===(e=this.adapterOptions.adapterSettings)||void 0===e?void 0:e.networkSwitchModal;n&&await n.addNetwork({chainConfig:t,appOrigin:window.location.hostname}),await this.wcProvider.addChain(t)}catch(t){tC.cM.error(t)}}async switchChain(t,e){var n;if(!this.wcProvider)throw tC.Ty.notReady("Wallet adapter is not ready yet");let r=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.networkSwitchModal;r&&await r.switchNetwork({currentChainConfig:e,newChainConfig:t,appOrigin:window.location.hostname}),await this.wcProvider.switchChain({chainId:e.chainId,lookup:!1,addChain:!1})}async createNewSession(){var t,e,n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{forceNewSession:!1};if(!this.connector)throw tC.Ty.notReady("Wallet adapter is not ready yet");if(r.forceNewSession&&this.connector.pending&&await this.connector.killSession(),null!==(t=this.adapterOptions)&&void 0!==t&&null!==(e=t.adapterSettings)&&void 0!==e&&e.qrcodeModal){await this.connector.createSession({chainId:parseInt((null===(n=this.chainConfig)||void 0===n?void 0:n.chainId)||"0x1",16)});return}return new Promise((t,e)=>{var n;if(!this.connector)return e(tC.Ty.notReady("Wallet adapter is not ready yet"));tC.cM.debug("creating new session for web3auth wallet connect"),this.connector.on("display_uri",async(n,r)=>{var i;if(n)return this.emit(tC.n2.ERRORED,tC.RM.connectionError("Failed to display wallet connect qr code")),e(n);let s=r.params[0];return this.updateAdapterData({uri:s,extensionAdapters:tT}),null===(i=this.connector)||void 0===i||i.off("display_uri"),t()}),this.connector.createSession({chainId:parseInt((null===(n=this.chainConfig)||void 0===n?void 0:n.chainId)||"0x1",16)}).catch(t=>(tC.cM.error("error while creating new wallet connect session",t),this.emit(tC.n2.ERRORED,t),e(t)))})}async onConnectHandler(t){if(!this.connector||!this.wcProvider)throw tC.Ty.notReady("Wallet adapter is not ready yet");if(!this.chainConfig)throw tC.Ty.invalidParams("Chain config is not set");let{chainId:e}=t;if(tC.cM.debug("connected chainId in hex"),e!==parseInt(this.chainConfig.chainId,16)){var n,r,i;let t=(0,tC.h2)(tC.EN.EIP155,e)||{chainId:"0x".concat(e.toString(16)),displayName:"Unknown Network"},s=null===(n=this.adapterOptions.adapterSettings)||void 0===n?void 0:n.qrcodeModal;if(!s||s&&!(null!==(r=this.adapterOptions)&&void 0!==r&&null!==(i=r.adapterSettings)&&void 0!==i&&i.skipNetworkSwitching))try{await this.addChain(this.chainConfig),await this.switchChain(t,this.chainConfig),this.connector=this.getWalletConnectInstance()}catch(n){tC.cM.error("error while chain switching",n),await this.createNewSession({forceNewSession:!0}),this.emit(tC.n2.ERRORED,tC.Ty.fromCode(5e3,"Not connected to correct network. Expected: ".concat(this.chainConfig.displayName,", Current: ").concat((null==t?void 0:t.displayName)||e,", Please switch to correct network from wallet"))),this.status=tC.MP.READY,this.rehydrated=!0;return}}await this.wcProvider.setupProvider(this.connector),this.subscribeEvents(this.connector),this.status=tC.MP.CONNECTED,this.emit(tC.n2.CONNECTED,{adapter:tC.rW.WALLET_CONNECT_V1,reconnected:this.rehydrated})}subscribeEvents(t){t.on("session_update",async t=>{t&&this.emit(tC.n2.ERRORED,t)})}getWalletConnectInstance(){let t=this.adapterOptions.adapterSettings||{};return t.bridge=t.bridge||"https://bridge.walletconnect.org",new tE(t)}}},44020:function(t){"use strict";var e="%[a-f0-9]{2}",n=RegExp("("+e+")|([^%]+?)","gi"),r=RegExp("("+e+")+","gi");t.exports=function(t){if("string"!=typeof t)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},i=r.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch(t){var s=function(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(n)||[],r=1;r<e.length;r++)e=(t=(function t(e,n){try{return[decodeURIComponent(e.join(""))]}catch(t){}if(1===e.length)return e;n=n||1;var r=e.slice(0,n),i=e.slice(n);return Array.prototype.concat.call([],t(r),t(i))})(e,r).join("")).match(n)||[];return t}}(i[0]);s!==i[0]&&(e[i[0]]=s)}i=r.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),a=0;a<o.length;a++){var c=o[a];t=t.replace(RegExp(c,"g"),e[c])}return t}(t)}}},4501:function(t){t.exports=r,r.strict=i,r.loose=s;var e=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function r(t){return i(t)||s(t)}function i(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function s(t){return n[e.call(t)]}},17563:function(t,e,n){"use strict";let r=n(70610),i=n(44020),s=n(80500),o=t=>null==t;function a(t){if("string"!=typeof t||1!==t.length)throw TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function h(t,e){return e.decode?i(t):t}function u(t){let e=t.indexOf("#");return -1!==e&&(t=t.slice(0,e)),t}function l(t){t=u(t);let e=t.indexOf("?");return -1===e?"":t.slice(e+1)}function d(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):e.parseBooleans&&null!==t&&("true"===t.toLowerCase()||"false"===t.toLowerCase())&&(t="true"===t.toLowerCase()),t}function p(t,e){a((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);let n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){r[t]=n;return}void 0===r[t]&&(r[t]={}),r[t][e[1]]=n};case"bracket":return(t,n,r)=>{if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),!e){r[t]=n;return}if(void 0===r[t]){r[t]=[n];return}r[t]=[].concat(r[t],n)};case"comma":case"separator":return(e,n,r)=>{let i="string"==typeof n&&n.split("").indexOf(t.arrayFormatSeparator)>-1,s=i?n.split(t.arrayFormatSeparator).map(e=>h(e,t)):null===n?n:h(n,t);r[e]=s};default:return(t,e,n)=>{if(void 0===n[t]){n[t]=e;return}n[t]=[].concat(n[t],e)}}}(e),r=Object.create(null);if("string"!=typeof t||!(t=t.trim().replace(/^[?#&]/,"")))return r;for(let i of t.split("&")){let[t,o]=s(e.decode?i.replace(/\+/g," "):i,"=");o=void 0===o?null:["comma","separator"].includes(e.arrayFormat)?o:h(o,e),n(h(t,e),o,r)}for(let t of Object.keys(r)){let n=r[t];if("object"==typeof n&&null!==n)for(let t of Object.keys(n))n[t]=d(n[t],e);else r[t]=d(n,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((t,e)=>{let n=r[e];return n&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(n):t[e]=n,t},Object.create(null))}e.extract=l,e.parse=p,e.stringify=(t,e)=>{if(!t)return"";a((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);let n=n=>e.skipNull&&o(t[n])||e.skipEmptyString&&""===t[n],r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{let i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[",i,"]"].join("")]:[...n,[c(e,t),"[",c(i,t),"]=",c(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[]"].join("")]:[...n,[c(e,t),"[]=",c(r,t)].join("")];case"comma":case"separator":return e=>(n,r)=>null==r||0===r.length?n:0===n.length?[[c(e,t),"=",c(r,t)].join("")]:[[n,c(r,t)].join(t.arrayFormatSeparator)];default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,c(e,t)]:[...n,[c(e,t),"=",c(r,t)].join("")]}}(e),i={};for(let e of Object.keys(t))n(e)||(i[e]=t[e]);let s=Object.keys(i);return!1!==e.sort&&s.sort(e.sort),s.map(n=>{let i=t[n];return void 0===i?"":null===i?c(n,e):Array.isArray(i)?i.reduce(r(n),[]).join("&"):c(n,e)+"="+c(i,e)}).filter(t=>t.length>0).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[n,r]=s(t,"#");return Object.assign({url:n.split("?")[0]||"",query:p(l(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:h(r,e)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0},n);let r=u(t.url).split("?")[0]||"",i=e.extract(t.url),s=e.parse(i,{sort:!1}),o=Object.assign(s,t.query),a=e.stringify(o,n);a&&(a=`?${a}`);let h=function(t){let e="",n=t.indexOf("#");return -1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(h=`#${c(t.fragmentIdentifier,n)}`),`${r}${a}${h}`}},80500:function(t){"use strict";t.exports=(t,e)=>{if(!("string"==typeof t&&"string"==typeof e))throw TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];let n=t.indexOf(e);return -1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},70610:function(t){"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)},70655:function(t,e,n){"use strict";n.r(e),n.d(e,{__assign:function(){return s},__asyncDelegator:function(){return m},__asyncGenerator:function(){return v},__asyncValues:function(){return b},__await:function(){return w},__awaiter:function(){return u},__classPrivateFieldGet:function(){return I},__classPrivateFieldSet:function(){return E},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return i},__generator:function(){return l},__importDefault:function(){return O},__importStar:function(){return k},__makeTemplateObject:function(){return S},__metadata:function(){return h},__param:function(){return c},__read:function(){return g},__rest:function(){return o},__spread:function(){return _},__spreadArrays:function(){return y},__values:function(){return f}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)0>e.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function a(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function c(t,e){return function(n,r){e(n,r,t)}}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,a)}c((r=r.apply(t,e||[])).next())})}function l(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function _(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function w(t){return this instanceof w?(this.v=t,this):new w(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){s.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{var n;(n=i[t](e)).value instanceof w?Promise.resolve(n.value.v).then(c,h):u(s[0][2],n)}catch(t){u(s[0][3],t)}}function c(t){a("next",t)}function h(t){a("throw",t)}function u(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function m(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:w(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function O(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return e.get(t)}function E(t,e,n){if(!e.has(t))throw TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},65054:function(t,e,n){var r=n(48764).Buffer,i=n(4501).strict;t.exports=function(t){if(!i(t))return r.from(t);var e=r.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(e=e.slice(t.byteOffset,t.byteOffset+t.byteLength)),e}},57026:function(t){"use strict";t.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}}]);