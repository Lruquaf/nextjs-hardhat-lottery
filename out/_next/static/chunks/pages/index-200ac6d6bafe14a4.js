(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{75557:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(50169)}])},33401:function(t,e,n){"use strict";let a=n(35206),s=n(82577);t.exports={addresses:a,abis:s}},50169:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m}});var a=n(85893),s=n(9008),r=n.n(s),i=n(39872);function u(){return(0,a.jsxs)("div",{className:"p-5 border-4 rounded border-blue-900 flex flex-row bg-sky-300",children:[(0,a.jsx)("h1",{className:"py-4 px-4 font-bold text-3xl",children:"Decentralized Automated Lottery"}),(0,a.jsx)("div",{className:"ml-auto py-2 px-4",children:(0,a.jsx)(i.f,{moralisAuth:!1})})]})}var o=n(33401),p=n(83078),c=n(67294),l=n(61744),y=n(61510),d=n(45821);function f(){let{chainId:t,isWeb3Enabled:e}=(0,p.Nr)(),n=parseInt(t),s=n in o.addresses?o.addresses[n].lottery:null,r=o.abis.lottery,i=n in o.addresses?o.addresses[n].priceConverter:null,u=o.abis.priceConverter,[f,m]=(0,c.useState)("0"),[b,g]=(0,c.useState)("0"),[v,w]=(0,c.useState)("0"),[x,h]=(0,c.useState)("0"),[_,N]=(0,c.useState)("0"),C=(0,y.P)(),{runContractFunction:j,data:E,isLoading:M,isFetching:F}=(0,p.JX)({abi:r,contractAddress:s,functionName:"enterLottery",params:{},msgValue:_}),{runContractFunction:L}=(0,p.JX)({abi:r,contractAddress:s,functionName:"getEntranceFee",params:{}}),{runContractFunction:S}=(0,p.JX)({abi:r,contractAddress:s,functionName:"getPlayerCounter",params:{}}),{runContractFunction:R}=(0,p.JX)({abi:r,contractAddress:s,functionName:"getRecentWinner",params:{}}),{runContractFunction:k}=(0,p.JX)({abi:u,contractAddress:i,functionName:"getPrice",params:{}});async function O(){if(e){let t=await L(),e=await S(),n=await R(),a=await k();m(t),g(e),w(n),h(a),function(t,e){let n=l.vz((t/e).toString(),"ether");N(n)}(t,a)}}(0,c.useEffect)(()=>{e&&O()},[e]);let P=async t=>{try{await t.wait(1),O(),T(t)}catch(t){console.log(t)}},T=()=>{C({type:"info",message:"Transaction Completed!",title:"Transaction Notification",position:"topR",icon:(0,d.Uos)("bell")})};return(0,a.jsxs)("div",{className:"p-5 bg-sky-200",children:[(0,a.jsx)("h1",{className:"text-xl py-5 font-bold mb-2",children:"There is lottery entrance!"}),s?(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 mb-4 rounded ml-auto",onClick:async function(){await j({onSuccess:P,onError:t=>console.log(t)})},disabled:M||F,children:M||F?(0,a.jsx)("div",{className:"animate-spin spinner-border h-8 w-8 border-b-2 rounded-full"}):"Enter Lottery"}),(0,a.jsxs)("div",{children:["Entrance Fee: $",l.bM(f,"ether")," (",f/x," ETH)"]}),(0,a.jsxs)("div",{children:["Number of Players: ",b.toString()]}),(0,a.jsxs)("div",{children:["Recent Winner: ",v.toString()]})]}):(0,a.jsx)("div",{children:"No Lottery Address Detected!"})]})}function m(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Smart Contract Lottery"}),(0,a.jsx)("meta",{name:"description",content:"My Smart Contract Lottery"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(u,{}),(0,a.jsx)(f,{})]})}},9008:function(t,e,n){t.exports=n(42636)},82577:function(t){"use strict";t.exports=JSON.parse('{"lottery":[{"type":"constructor","payable":false,"inputs":[{"type":"uint256","name":"_entranceFee"},{"type":"uint256","name":"_interval"},{"type":"address","name":"_randomNumberGenerator"},{"type":"address","name":"_priceConverter"}]},{"type":"error","name":"Lottery__Closed","inputs":[]},{"type":"error","name":"Lottery__NotEnoughParticipant","inputs":[]},{"type":"error","name":"Lottery__NotEntranceFee","inputs":[]},{"type":"error","name":"Lottery__NotRightTime","inputs":[]},{"type":"error","name":"Lottery__Open","inputs":[]},{"type":"error","name":"Lottery__RandomNumberNotExists","inputs":[]},{"type":"error","name":"Lottery__TransferFailed","inputs":[]},{"type":"event","anonymous":false,"name":"LotteryEntered","inputs":[{"type":"address","name":"player","indexed":true}]},{"type":"event","anonymous":false,"name":"OwnershipTransferred","inputs":[{"type":"address","name":"previousOwner","indexed":true},{"type":"address","name":"newOwner","indexed":true}]},{"type":"event","anonymous":false,"name":"WinnerPicked","inputs":[{"type":"address","name":"recentWinner","indexed":true}]},{"type":"event","anonymous":false,"name":"WinnerRequested","inputs":[{"type":"uint256","name":"requestId","indexed":true}]},{"type":"function","name":"enterLottery","constant":false,"stateMutability":"payable","payable":true,"gas":29000000,"inputs":[],"outputs":[]},{"type":"function","name":"getEntranceFee","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getInterval","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getLatestCheckpoint","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getPlayer","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"_id"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getPlayerCounter","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getRandomNumber","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getRecentWinner","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"address"}]},{"type":"function","name":"getRequestId","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getState","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"bool"}]},{"type":"function","name":"owner","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"address"}]},{"type":"function","name":"pickRandomWinner","constant":false,"payable":false,"gas":29000000,"inputs":[],"outputs":[]},{"type":"function","name":"priceConverter","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"address"}]},{"type":"function","name":"randomNumberGenerator","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"address"}]},{"type":"function","name":"renounceOwnership","constant":false,"payable":false,"gas":29000000,"inputs":[],"outputs":[]},{"type":"function","name":"requestRandomWinner","constant":false,"payable":false,"gas":29000000,"inputs":[],"outputs":[]},{"type":"function","name":"transferOwnership","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"newOwner"}],"outputs":[]}],"priceConverter":[{"type":"constructor","payable":false,"inputs":[{"type":"address","name":"_priceFeed"}]},{"type":"function","name":"getConversionRate","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"ETHAmount"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getPrice","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"priceFeed","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"address"}]}]}')},35206:function(t){"use strict";t.exports=JSON.parse('{"31337":{"lottery":"0xa513E6E4b8f2a923D98304ec87F64353C4D5C853","priceConverter":"0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"}}')}},function(t){t.O(0,[7257,4956,9774,2888,179],function(){return t(t.s=75557)}),_N_E=t.O()}]);